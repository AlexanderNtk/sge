# **State Transitions**

This section defines the state transitions of the house module's KVStore in all scenarios:

## **Despoit**

Validations before modifiying the state:

- If the sanity checks for making a deposit passes
- If authorization grant found for the depositor address and creator
- If the authorization spend limit exceeded.

a new deposit will be created with the given data and will be added to the `House` module state.
the order book participation will create in the background and its index will be assigned to the deposit.

### **Input data**

```go
newDeposit := &types.Deposit{
    Creator:                msg.Creator,
    DepositorAddress:       <ticket.DepositorAddress>,
    MarketUID:              msg.MarketUID,
    ParticipationIndex      <index of paticipation generated by code>
    Amount:                 msg.Amount,
    Fee                     <will be calculated when deposition>,
    Liquidity:              <free amount that is accessible by code and depositor>,
    WithdrawalCount:        <count of attempts of withdrawal>
    TotalWithdrawalAmount:  <total withdrawal attempts>
}
```

---

## **Withdraw**

Validations before modifiying the state:

- If the amount is withdrawable
- If authorization grant found for the depositor address and creator
- If the authorization withdraw limit exceeded.

The following changes will be made to the deposit

```go
    deposit.WithdrawalCount++
    deposit.TotalWithdrawalAmount = deposit.TotalWithdrawalAmount + WithdrawalAmount
```
